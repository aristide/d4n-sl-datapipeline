Install Kubenetes cluster

on each node:
------------
#swapoff -a
#sed -i '/swap/d' /etc/fstab


#cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf
overlay
br_netfilter
EOF

#modprobe overlay
#modprobe br_netfilter

#cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf
net.bridge.bridge-nf-call-iptables  = 1
net.bridge.bridge-nf-call-ip6tables = 1
net.ipv4.ip_forward                 = 1
EOF

#sysctl --system


on master:
-----------

#### install dependences and install rsa key 

copy the rsa_key 
#scp ~/.ssh/id_rsa.pub  root@172.31.5.247:/root
#cat id_rsa.pub >> ~/.ssh/authorized_keys

#kk create cluster -f config-sample.yaml

### /!\ to add a new worker to the cluster: edit config-sample.yaml  and run 
#kk add nodes -f config-sample.yaml


### metrics server
wget https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml
nano component.yaml
```` file and add the following argument to the args section of the Metrics Server container
args:
  - --kubelet-insecure-tls
````
kubectl apply -f components.yaml
kubectl get deployment metrics-server -n kube-system
kubectl top nodes
kubectl top pods -n kube-system
